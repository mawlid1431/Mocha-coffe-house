<%- contentFor('HeaderCss') %> <%- contentFor('breadcrumb') %>

<div class="row">
  <div class="col-12">
    <div
      class="page-title-box d-sm-flex align-items-center justify-content-between"
    >
      <h4 class="mb-sm-0">update users</h4>

      <div class="page-title-right">
        <ol class="breadcrumb m-0">
          <li class="breadcrumb-item">
            <a href=""> add users</a>
          </li>
        </ol>
      </div>
    </div>
  </div>
</div>

<%- contentFor('body') %>

<div class="row">
  <div class="col-xl-12">
    <div class="card">
      <div class="card-body">
        <form class="needs-validation" novalidate id="hargeisa">
          <div class="row">
            <!-- fist one star here  -->
            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  User Id</label
                >
                <input
                  type="text"
                  class="form-control"
                  placeholder="id"
                  value="<%=user.id%>"
                  id="id"
                  name="id"
                  value="id"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>
            <!-- added div -->
            <!-- ended 1  -->
            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  username</label
                >
                <input
                  type="text"
                  class="form-control"
                  placeholder="username"
                  value="<%=user.username%>"
                  id="username"
                  name="username"
                  value="username"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>
            <!-- ended 2 here -->
            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  email</label
                >
                <input
                  type="email"
                  class="form-control"
                  placeholder="email"
                  value="<%=user.email%>"
                  id="email"
                  name="email"
                  value="email"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>
            <!-- eneded 3 here -->

            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  phone</label
                >
                <input
                  type="number"
                  class="form-control"
                  placeholder="phone"
                  value="<%=user.phone%>"
                  id="phone"
                  name="phone"
                  value="phone"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>

            <!-- four enede here  -->
          </div>

          <!-- qaybta hoose  -->
          <div class="row">
            <!-- fist one star here  -->
            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  password</label
                >
                <input
                  type="password"
                  class="form-control"
                  placeholder="password"
                  value="<%=user.password%>"
                  id="password"
                  name="password"
                  value="password"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>

            <!-- ended 1  -->
            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  firstName</label
                >
                <input
                  type="text"
                  class="form-control"
                  placeholder=" firstName"
                  value="<%=user.firstName%>"
                  id="firstName"
                  name="firstName"
                  value="firstName"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>
            <!-- ended 2 here 
             -->
            <div class="col-md-3">
              <div class="mb-3">
                <label for="validationCustom01" class="form-label">
                  lastName</label
                >
                <input
                  type="text"
                  class="form-control"
                  placeholder="lastName"
                  value="<%=user.lastName%>"
                  id="lastName"
                  name="lastName"
                  value="lastName"
                  required
                />
                <div class="valid-feedback">Looks good!</div>
              </div>
            </div>
            <!-- eneded 3 here -->

            <div class="col-md-3"></div>

            <!-- four enede here  -->
          </div>

          <!-- halkan  ka bilow -->

          <div class="col-md-12">
            <div class="mb-3">
              <label for="validationCustom04" class="form-label">role</label>
              <select name="role" id="role" value="role">
                <option value="">Select Role</option>
                <option value="">manager</option>
                <option value="cashier">cashier</option>
                <option value="Guard">Guard</option>
                <option value="mooji">other staf</option>
              </select>
              <div class="invalid-feedback">Please provide a valid city.</div>
            </div>
          </div>

          <button class="btn btn-primary" type="submit" class="col-md-12">
            Submit updated data
          </button>
        </form>
      </div>
    </div>
    <!-- end card -->
  </div>
  <!-- end col -->

  <!-- end col -->
</div>
<!-- end row -->

<!-- end row -->

<%- contentFor('FooterJs') %>

<script src="/public/assets/libs/parsleyjs/parsley.min.js"></script>

<script src="/public/assets/js/pages/form-validation.init.js"></script>

<%- contentFor('BottomJs') %>
<script>
  let divo = document.querySelector(`#hargeisa`);
  // console.log(divo);
  divo.addEventListener(`submit`, (e) => {
    e.preventDefault();
    // console.log("yes");

    // getting id all the inputs

    const idInput = document.querySelector(`#id`);
    const usernameInput = document.querySelector(`#username`);
    const emailInput = document.querySelector(`#email`);
    const phoneInput = document.querySelector(`#phone`);
    const passwordInput = document.querySelector(`#password`);
    const firstNameInput = document.querySelector(`#firstName`);
    const lastNameInput = document.querySelector(`#lastName`);

    const roleInput = document.querySelector(`#role`);

    // scripting data

    let data = {
      id: idInput.value,
      username: usernameInput.value,
      email: emailInput.value,
      phone: phoneInput.value,
      password: passwordInput.value,
      firstName: firstNameInput.value,
      lastName: lastNameInput.value,

      role: roleInput.value,
    };
    console.log(data);

    // sendind data form update from to user site
    // geting id from form
    const id = `<%=user.id%>`;
    console.log(id);

    fetch(`/admin/users/${id}`, {
      method: "PUT",
      body: JSON.stringify(data),
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then((location.href = "/admin/users"))
      .catch((error) => console(`error`));
  });
</script>
